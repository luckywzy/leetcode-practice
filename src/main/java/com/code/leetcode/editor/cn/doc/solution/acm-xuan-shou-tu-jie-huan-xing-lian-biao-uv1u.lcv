å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å¸…è›‹ã€‚

ä»Šå¤©æ¥åˆ‡**ç¯å½¢é“¾è¡¨å‡çº§ç‰ˆ**ï¼Œå³é™¤äº†åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æ˜¯ç¯å½¢é“¾è¡¨å¤–ï¼Œè¿˜è¦æ‰¾åˆ°ç¯å½¢é“¾è¡¨çš„å…¥å£åœ¨å“ªã€‚

é™¤äº†è¿˜æ˜¯ç”¨åˆ°å¿«æ…¢æŒ‡é’ˆå¤–ï¼ŒåŠ äº†ä¸€ç‚¹æ•°å­¦æ€æƒ³ã€‚

ä¸æ…Œï¼Œä¿è¯å®‰æ’çš„æ˜æ˜ç™½ç™½ã€‚

![ed1145c7f7a0c643d1e79f5244b9dfc](https://pic.leetcode-cn.com/1641710006-WUccgR-20220102_152052118_0.jpg)

# LeetCode 142ï¼šç¯å½¢é“¾è¡¨â…¡

## é¢˜æ„

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚è‹¥é“¾è¡¨æ— ç¯ï¼Œè¿”å› null

## ç¤ºä¾‹

ä½¿ç”¨æ•´æ•° pos è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®(ç´¢å¼•ä» 0 å¼€å§‹)ã€‚

è¾“å…¥ï¼šhead = [3, 2, 0, -4]ï¼Œpos = 1

è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹ã€‚

è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚

è¾“å…¥ï¼šhead = [1]ï¼Œpos = -1

è¾“å‡ºï¼šè¿”å› null

è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚

## æç¤º

- pos **ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’**ï¼Œä»…æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚

- 0 <= é“¾è¡¨èŠ‚ç‚¹æ•° <= 10^4

- 10^-5 <= Node.val <= 10^5

- pos ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼•ã€‚

# é¢˜ç›®è§£æ

éš¾åº¦ä¸­ç­‰ï¼Œé¢˜ç›®è§£å†³åˆ†ä¸º**ä¸¤æ­¥èµ°**ï¼š

1. åˆ¤æ–­æ˜¯å¦æœ‰ç¯ã€‚
2. è‹¥æœ‰ç¯ï¼Œæ‰¾å…¥å£ï¼Œæ‰¾åˆ°ç»“æŸï¼›è‹¥æ— ç¯ï¼Œç»“æŸã€‚

## ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ç¯

åšæ³•åŒ [LeetCode 141](http://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919540&idx=1&sn=12f2bdd8f46f3c019301a402f02832bb&chksm=ff22ef39c855662fd64370a619e8d1164343e1f36c053593f67abef9ef333bb68007f787238f&scene=21#wechat_redirect)ã€‚

åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Œä¸€èˆ¬ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆã€‚

**å¿«æ…¢æŒ‡é’ˆï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ä½¿ç”¨é€Ÿåº¦ä¸åŒçš„æŒ‡é’ˆï¼ˆå¯ç”¨åœ¨é“¾è¡¨ã€æ•°ç»„ã€åºåˆ—ç­‰ä¸Šé¢ï¼‰ï¼Œæ¥è§£å†³ä¸€äº›é—®é¢˜ã€‚**

è¿™äº›é—®é¢˜ä¸»è¦åŒ…æ‹¬ï¼š

- å¤„ç†ç¯ä¸Šçš„é—®é¢˜ï¼Œæ¯”å¦‚ç¯å½¢é“¾è¡¨ã€ç¯å½¢æ•°ç»„ç­‰ã€‚
- éœ€è¦çŸ¥é“é“¾è¡¨çš„é•¿åº¦æˆ–æŸä¸ªç‰¹åˆ«ä½ç½®ä¸Šçš„ä¿¡æ¯çš„æ—¶å€™ã€‚

å¿«æ…¢æŒ‡é’ˆè¿™ç§ç®—æ³•è¯æ˜ï¼Œå®ƒä»¬è‚¯å®šæ˜¯ä¼šç›¸é‡çš„ï¼Œå¿«çš„æŒ‡é’ˆä¸€å®šä¼šè¿½ä¸Šæ…¢çš„æŒ‡é’ˆï¼Œå¯ä»¥ç†è§£æˆæ“åœºä¸Šè·‘æ­¥ï¼Œè·‘çš„å¿«çš„äººå¥—åœˆè·‘çš„æ…¢çš„äººã€‚

ä¸€èˆ¬ç”¨ fast å®šä¹‰å¿«æŒ‡é’ˆï¼Œç”¨ slow å®šä¹‰æ…¢æŒ‡é’ˆã€‚

é€Ÿåº¦ä¸åŒæ˜¯æŒ‡ fast æ¯æ¬¡å¤šèµ°å‡ æ­¥ï¼Œslow å°‘èµ°å‡ æ­¥ã€‚ä¸€èˆ¬è®¾å®šçš„éƒ½æ˜¯ fast èµ° 2 æ­¥ï¼Œslow èµ° 1 æ­¥ã€‚

å½“ç„¶è®¾ç½®æˆåˆ«çš„æ•´æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ fast èµ° 3 æ­¥ï¼Œslow èµ° 1 æ­¥ã€‚

## ç¬¬äºŒæ­¥ï¼šæ‰¾å…¥å£

è¿™ä¸€æ­¥è¦ç”¨åˆ°ç‚¹å„¿æ•°å­¦ï¼Œä¸‹é¢æ¥çœ‹ä¸€å¼ ç®€å›¾ã€‚

![079936517eaf938f8e37ee064b2eb75](https://pic.leetcode-cn.com/1641710006-ofHmUx-20220102_152328850_0.jpg)

å‡è®¾ï¼š

- ä»**å¤´èŠ‚ç‚¹åˆ°å…¥å£çš„**è·ç¦»ä¸º abã€‚
- ä»**å…¥å£åˆ°ç›¸é‡ç‚¹**çš„è·ç¦»ä¸º bcã€‚
- ä»**ç›¸é‡ç‚¹åˆ°å…¥å£**çš„è·ç¦»ä¸º cbã€‚

åˆ™**é“¾è¡¨ç¯çš„é•¿åº¦** = bc + cbã€‚

é‚£ä¹ˆå¿«æ…¢æŒ‡é’ˆç›¸é‡æ—¶æ‰€èµ°è¿‡çš„æ­¥æ•°ä¸ºï¼š
$$
faststep = ab + bc + n * (bc + cb) ã€å…¬å¼ 1ã€‘
$$

$$
slowstep = ab + bc ã€å…¬å¼ 2ã€‘
$$

n æŒ‡çš„æ˜¯ fast æŒ‡é’ˆèµ°è¿‡çš„åœˆæ•°ï¼Œ**n çš„å–å€¼è‚¯å®šæ˜¯ n â‰¥ 1**ï¼Œå› ä¸ºå¿«æŒ‡é’ˆ fast æœ€å°‘è¦å¤šè·‘ä¸€åœˆæ‰èƒ½è¿½ä¸Šæ…¢æŒ‡é’ˆ slowã€‚

åˆç”±äºå¿«æŒ‡é’ˆæ¯æ¬¡èµ° 2 æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ° 1 æ­¥ï¼Œæ‰€ä»¥åˆæœ‰ï¼š
$$
faststep = 2 * slowstep ã€å…¬å¼ 3ã€‘
$$
ç»¼åˆå…¬å¼ 1ã€å…¬å¼ 2ã€å…¬å¼ 3ï¼Œå¾—å‡ºï¼š
$$
ab + bc + n * (bc + cb) = 2 * (ab + bc) ã€å…¬å¼ 4ã€‘
$$
æ•´ç†å¾—ï¼š
$$
ab = (n - 1) * (bc + cb) + cb ã€å…¬å¼ 5ã€‘
$$
å…¶ä¸­ (n - 1) * (bc + cb) æ­£å¥½æ˜¯ (n - 1) ä¸ªç¯å½¢çš„é•¿åº¦ã€‚

ä¸ºäº†æ›´å¥½çš„ç†è§£å…¬å¼ 5ï¼Œæˆ‘ä»¬å‡è®¾ n = 1ï¼Œä¹Ÿå°±æ˜¯å¿«æŒ‡é’ˆ fast æŒ‡é’ˆèµ°ä¸€åœˆå°±å¯ä»¥ç¢°åˆ°æ…¢æŒ‡é’ˆ slowã€‚

é‚£ä¹ˆå…¬å¼ 5 å˜æˆï¼š
$$
ab = cb
$$
ä½ çœ‹è¿™ä¸ªå…¬å¼å¥½å·§å¦™ï¼Œab æ˜¯ä»èŠ‚ç‚¹åˆ°å…¥å£çš„è·ç¦»ï¼Œcb æ˜¯ä»ç›¸é‡èŠ‚ç‚¹åˆ°å…¥å£çš„è·ç¦»ï¼Œè¿™è¯´æ˜ä»€ä¹ˆå‘¢ï¼Ÿ

**è¯´æ˜åŒæ—¶ä»å¤´èŠ‚ç‚¹å’Œç›¸é‡èŠ‚ç‚¹å‡ºå‘çš„ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ¯æ¬¡èµ° 1 æ­¥ï¼Œæœ€ç»ˆä¼šåœ¨å…¥å£å¤„ç›¸é‡ã€‚**

æ‰€ä»¥å¦‚æœåˆ¤æ–­é“¾è¡¨æ˜¯ç¯å½¢é“¾è¡¨ï¼Œâ€œæ‰¾å…¥å£â€å°±æˆäº†ï¼Œåœ¨æ‰¾åˆ°å¿«æ…¢æŒ‡é’ˆç›¸é‡èŠ‚ç‚¹æ—¶ï¼Œè®¾ç½®ä¸¤ä¸ªæ–°èŠ‚ç‚¹ flag1 å’Œ flag2ã€‚

å…¶ä¸­ flag1 æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œflag2 æŒ‡å‘å¿«æ…¢æŒ‡é’ˆç›¸é‡èŠ‚ç‚¹ï¼Œç„¶åæ¯æ¬¡ç§»åŠ¨ 1 æ­¥ï¼Œç›´è‡³ flag1 å’Œ flag2 ç›¸é‡ã€‚

# å›¾è§£

ä»¥ head = [3, 2, 0, -4]ï¼Œpos = 1 ä¸ºä¾‹ã€‚

## ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ç¯

ç¬¬ 1 æ­¥ï¼šåˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆã€‚æ¯æ¬¡ slow èµ° 1 æ­¥ï¼Œfast èµ° 2 æ­¥ã€‚

![d3e51aa3bcf8f80b85ae56553b03706](https://pic.leetcode-cn.com/1641710006-xltVLC-20220102_152822735_0.jpg)

ç¬¬ 2 æ­¥ï¼šslow ç§»åŠ¨ 1 æ­¥ï¼Œfast ç§»åŠ¨ 2 æ­¥ã€‚

![55df8be7e279e4e3122d71551582270](https://pic.leetcode-cn.com/1641710006-QDngIV-20220102_152848817_0.jpg)

ç¬¬ 3 æ­¥ï¼šåŒä¸Šã€‚

![a1128d45beb74decb45fb785238d673](https://pic.leetcode-cn.com/1641710006-ZGrviB-20220102_152915488_0.jpg)

ç¬¬ 4 æ­¥ï¼šåŒä¸Šã€‚

![18bb75ede86a787aa2b70ae3b300e0a](https://pic.leetcode-cn.com/1641710006-alAQdC-20220102_152933105_0.jpg)

æ­¤æ—¶ fast = slowï¼Œåˆ¤æ–­æœ‰ç¯ã€‚

## ç¬¬äºŒæ­¥ï¼šæ‰¾å…¥å£ã€‚

ç¬¬ 1 æ­¥ï¼šè®¾ç½®ä¸¤ä¸ªæ–°èŠ‚ç‚¹ï¼Œflag1 æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œflag2 æŒ‡å‘å¿«æ…¢æŒ‡é’ˆç›¸é‡èŠ‚ç‚¹ã€‚

![55d790d8ba25a790c8c26b617ba9b6d](https://pic.leetcode-cn.com/1641710006-jvpjji-20220102_153004839_0.jpg)

ç¬¬ 2 æ­¥ï¼šflag1 ç§»åŠ¨ 1 æ­¥ï¼Œflag2 ç§»åŠ¨ 1 æ­¥ã€‚

![adaf4275b2f2af7cd7e26499b0c03b0](https://pic.leetcode-cn.com/1641710006-jncdyA-20220102_153022673_0.jpg)

æ­¤æ—¶ flag1 å’Œ flag2 ç›¸é‡ï¼Œæ‰¾åˆ°å…¥å£ç´¢å¼•ä¸º 1ï¼Œè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹ã€‚

åˆ¤æ–­æ˜¯å¦æœ‰ç¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæ‰¾å…¥å£çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(n)ï¼Œæ‰€ä»¥**æ€»çš„æ—¶é—´å¤æ‚åº¦ = O(n) + O(n) = O(n)**ã€‚

å› ä¸ºåªä½¿ç”¨äº† fastã€slowã€flag1 å’Œ flag2 å››ä¸ªæŒ‡é’ˆï¼Œæ‰€ä»¥**ç©ºé—´å¤æ‚åº¦ä¸º O(1)**ã€‚

# ä»£ç å®ç°

## Python ä»£ç å®ç°

* Python

```Python
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None

class Solution:
    def detectCycle(self, head: ListNode) -> ListNode:

        # ç©ºé“¾è¡¨æˆ–é“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— ç¯
        if not head or head.next == None:
            return None

        # åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆ
        fast = slow = head

        # å¦‚æœä¸å­˜åœ¨ç¯ï¼Œè‚¯å®š fast å…ˆæŒ‡å‘ null
        # ç»†èŠ‚ï¼šfast æ¯æ¬¡èµ° 2 æ­¥ï¼Œæ‰€ä»¥è¦ç¡®å®š fast å’Œ fast.next ä¸ä¸ºç©ºï¼Œä¸ç„¶ä¼šæŠ¥æ‰§è¡Œå‡ºé”™ã€‚
        while fast and fast.next:

            # å¿«æŒ‡é’ˆç§»åŠ¨ 2 æ­¥ï¼Œæ…¢æŒ‡é’ˆç§»åŠ¨ 1 æ­¥
            fast = fast.next.next
            slow = slow.next

            # å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œæœ‰ç¯
            # ç„¶åå¼€å§‹æ‰¾å…¥å£
            if fast == slow:

                # åˆå§‹åŒ– flag1 å’Œ flag2
                flag1 = head
                flag2 = fast

                # æ‰¾ flag1 ä¸ flag2 ç›¸é‡çš„èŠ‚ç‚¹
                while flag1 != flag2:
                    flag1 = flag1.next
                    flag2 = flag2.next
                return flag1

        return None
```

## Java ä»£ç å®ç°

* Python

```Python
public class Solution {
    public ListNode detectCycle(ListNode head) {
        ListNode slow = head;
        ListNode fast = head;
        while (fast != null && fast.next != null) {
            slow = slow.next;
            fast = fast.next.next;
            if (slow == fast) {// æœ‰ç¯
                ListNode index1 = fast;
                ListNode index2 = head;
                // ä¸¤ä¸ªæŒ‡é’ˆï¼Œä»å¤´ç»“ç‚¹å’Œç›¸é‡ç»“ç‚¹ï¼Œå„èµ°ä¸€æ­¥ï¼Œç›´åˆ°ç›¸é‡ï¼Œç›¸é‡ç‚¹å³ä¸ºç¯å…¥å£
                while (index1 != index2) {
                    index1 = index1.next;
                    index2 = index2.next;
                }
                return index1;
            }
        }
        return null;
    }
}
```

---

**å›¾è§£æœ‰ç¯é“¾è¡¨å…¥å£**åˆ°è¿™å°±ç»“æŸå•¦ï¼Œè¿™ç®—æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç¢°åˆ°ç¨å¾®æœ‰ç‚¹éš¾åº¦çš„é¢˜ã€‚

æ²¡æ…Œå§ï¼Ÿ

å…¶å®ä¹Ÿå°±è¿™ä¹ˆå›äº‹ï¼Œä¸€æ­¥æ­¥çš„è·Ÿç€æœ¬è›‹èµ°ä¸‹æ¥ï¼Œä»€ä¹ˆéƒ½èƒ½è§£å†³ï¼

åŠ æ²¹ï¼Œ**åˆ«å¿˜äº†æˆ‘çš„ç‚¹èµä¹ˆä¹ˆå“’å‘€**ã€‚

æˆ‘æ˜¯å¸…è›‹ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ï¼

<br />

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬é“¾è¡¨**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475918898&idx=1&sn=e5c7bf9c43dd205082f77beead41a187&chksm=ff22e1bfc85568a945b3e4569ea727148e6e736ccce15ec12d77c2f8ae7b8acb2eabf900e3a6&token=2003688948&lang=zh_CN#rd)

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode è®¾è®¡é“¾è¡¨**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919224&idx=1&sn=e4695565fca1669e6010108aab934382&chksm=ff22e0f5c85569e3ac234fb371081c1c4e64707cea7295261e3e2b003e039a522a27ead58f04&token=246576668&lang=zh_CN#rd)

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode åè½¬é“¾è¡¨**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919260&idx=1&sn=6538a2c8b9786f2c29236a1b001524c0&chksm=ff22e011c8556907e08fc50a4c242eb4754d5fdf0dc3a6ae837d3fd139872e6346c5fa9cad13&token=1660238762&lang=zh_CN#rd)

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode äº¤æ¢é“¾è¡¨**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919380&idx=1&sn=f4564f6926b169e8f7820ade0d04af8f&chksm=ff22ef99c855668fe740cd03b4987eb0e11a33385e4813a03525a53712adcf51d121c7129235&token=1660238762&lang=zh_CN#rd)

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode ç¯å½¢é“¾è¡¨**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475919540&idx=1&sn=12f2bdd8f46f3c019301a402f02832bb&chksm=ff22ef39c855662fd64370a619e8d1164343e1f36c053593f67abef9ef333bb68007f787238f&token=1660238762&lang=zh_CN#rd)

[**æ¨èé˜…è¯» ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦**](https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475918746&idx=1&sn=3fe42234a1f07fb084d11fe06fb24893&chksm=ff22e217c8556b019b9052f9d4805174385ba4c8c099216fa226dbd1b033a9a49782579e4b75&scene=21#wechat_redirect)
